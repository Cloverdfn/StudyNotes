# 一、继承与派生
继承是指一个对象直接使用另一对象的属性和方法。继承呈现了 面向对象程序设 计的层次结构，体现了 由简单到复杂的认知过程。
* 继承的格式
````
class 派生类名:继承方  基类名
{
    派生类新增加的成员
};
````
C++中的继承关系就好比现实生活中的父子关系，继承一笔财产比白手起家要容易得多，原始类称为基类，继承类称为派生类，它们是
类似于父亲和儿子的关系，所以也分别叫父类和子类。而子类又可以当成父类，被另外的类继承。

继承的方式有三种分别为公有继承（`public`）,保护继承（`protect`），私有继承（`private`）。定义格式如下：
<div align = "center"><img src = "https://github.com/sunnyandgood/StudyNotes/blob/master/C%2B%2B/img/%E7%BB%A7%E6%89%BF%E5%9B%BE%E8%A7%A3.png"/></div>

# 二、继承方式及访问属性
  1. 公有继承(`public`)

>公有继承的特点是基类的公有成员和保护成员作为派生类的成员时，它们都保持原有的状态，而基类的私有成员仍然是私有的，不能被这个派生类的子类所访问。

    基类中所有public成员在派生类中为public属性；
    基类中所有protected成员在派生类中为protected属性；
    基类中所有private成员在派生类中不可访问。


  2. 私有继承(`private`)

>私有继承的特点是基类的公有成员和保护成员都作为派生类的私有成员，并且不能被这个派生类的子类所访问。

    基类中的所有public成员在派生类中为protected属性；
    基类中的所有protected成员在派生类中为protected属性；
    基类中的所有private成员在派生类中仍然不可访问。
  3. 保护继承(`protected`)

>保护继承的特点是基类的所有公有成员和保护成员都成为派生类的保护成员，并且只能被它的派生类成员函数或友元访问，基类的私有成员仍然是私有的。

    基类中的所有public成员在派生类中均为private属性；
    基类中的所有protected成员在派生类中均为private属性；
    基类中的所有private成员在派生类中均不可访问。
　　private能够对外部和子类保密，即除了成员所在的类本身可以访问之外，别的都不能直接访问。protected能够对外部保密，但允许子类直接访问这些成员。public、private和protected对成员数据或成员函数的保护程度可以用下表来描述：
<table>
<tr >
  <td width=''>继承方式</td>
  <td width=''>基类的public成员</td>
  <td>基类的protected成员</td>
  <td>基类的private成员</td>
  <td>继承引起的访问控制关系概括</td>
</tr>
<tr >
  <td>public继承</td>
  <td>仍为public成员</td>
  <td>仍为protected成员</td>
  <td>不可见</td>
  <td>基类的非私有成员在子类的访问属性都不变</td>
</tr>
  <tr >
  <td>protected继承</td>
  <td>变为protected成员</td>
  <td>变为protected成员</td>
  <td>不可见</td>
  <td>基类的非私有成员都成为子类的保护成员</td>
</tr>
  <tr >
  <td>private继承</td>
  <td>变为private成员</td>
  <td>变为private成员</td>
  <td>不可见</td>
    <td>基类的非私有成员都成为子类的私有成员</td>
</tr>
</table>

* 基类成员在派生类中的访问权限不得高于继承方式中指定的权限。例如，当继承方式为 protected 时，那么基类成员在派生类中的访问权限最高也为 protected，高于 protected 的会降级为 protected，但低于 protected 不会升级。
* 基类中的 private 成员在派生类中始终是不可访问的。
* private 继承限制太多，实际开发中很少使用，一般使用 public。

>For example
````
class Base    //父类
{
private:
    int pri_B;
protected:
    int pro_B;
public:
    int pub_B;
} ;
````
````
class Derived1: public Base    //子类，继承自base,继承类型为公有继承
{
private:
    int pri_D;
protected:
    int pro_D;
public:
    int pub_D;
    void fun()
    {
        int d;
      //d = pri_B;       //error：基类中私有成员在派生类中是不可见的
        d = pro_B;       //ok： 基类的保护成员在派生类中为保护成员
        d = pub_B;       //ok： 基类的公共成员在派生类中为公共成员
    }
};
````

````
class Derived2 :private Base    //基类Base的派生类C（私有继承）
{
public:
    void funct()
    {
        int c;
      //c = pri_B;      //error：基类中私有成员在派生类中是不可见的
        c = pro_B;      //ok：基类的保护成员在派生类中为私有成员
        c = pub_B;      //ok：基类的公共成员在派生类中为私有成员
    }
};
````
````
class Derived3 :protected Base   //基类Base的派生类E（保护继承）
{
public:
    void funct()
    {
        int e ;
      //e = pri_B;    //error：基类中私有成员在派生类中是不可见的
        e = pro_B;    //ok：基类的保护成员在派生类中为保护成员
        e = pub_B;    //ok：基类的公共成员在派生类中为保护成员
    }
};
````

````
int main()
{
    int a; 
    Derived1 d1;
    a = d1.pri_B;     //error：公有继承基类中私有成员在派生类中是不可见的,对对象不可见
    a = d1.pro_B;     //error：公有继承基类的保护成员在派生类中为保护成员，对对象不可见
    a = d1.pub_B;     //ok：公有继承基类的公共成员在派生类中为公共成员，对对象可见
    Derived2 d2;
    a = d23.pri_B;    //error：私有继承基类中私有成员在派生类中是不可见的, 对对象不可见
    a = d23.pro_B;    //error：私有继承基类的保护成员在派生类中为私有成员，对对象不可见
    a = d23.pub_B;    //error：私有继承基类的公共成员在派生类中为私有成员，对对象不可见
    Derived2 d3;
    a = d3.pri_B;     //error：保护继承基类中私有成员在派生类中是不可见的, 对对象不可见
    a = d3.pro_B;     //error：保护继承基类的保护成员在派生类中为保护成员，对对象不可见
    a = d3.pub_B;     //error：保护继承基类的公共成员在派生类中为保护成员，对对象不可见
 
    return 0;
}
````
* 总结
    * `public`继承是一个接口继承，保持`is-a`原则，每个父类可用的成员对子类也可用， 因为每个子类对象也都是一个父类对象。
    * 基类的`private`成员 在派生类中是不能被访问的， 如果基类成员 不想在类外直接被访问， 但需要 在派生类中能访问， 就定义为`protected`。 可以看出保护成员 限定符是因继承才出现的。
    * `protected/private`继承是一个实现继承， 基类的部分成员 并非完全成为子类接口 的一部分， 是 `has-a` 的关系原则， 所以非特殊情况下不会使用这两种继承关系， 在绝大多数的场景下使用的 都是公有继承。 私有继承以为这`is-implemented-in-terms-of`(是根据......实现的) 。 通常比组合(`composition`) 更低级， 但当一个派生类需要访问 基类保护成员 或需要重定义基类的虚函数时它就是合理的。
    * 不管是哪种继承方式， 在派生类内部都可以访问基类的公有成员和保护成员 ， 基类的私有成员存在但是在子类中不可见（不能访问） 。
    * 使用关键字`class`时默认的继承方式是`private`， 使用`struct`时默认的继承方式是`public`， 不过最好显式的写出继承方式。
    * 在实际运用中一般使用都是`public`继承， 极少场景下才会使用`protetced/private`继承。

**在`struct`继承中，如果没有显式给出继承类型，则默认的为`public`继承；在`class`继承中，如果没有显式给出继承类型，则默认的为`private`继承；**

# 三、继承关系&访问限定符
<div align = "center"><img src = "https://github.com/sunnyandgood/StudyNotes/blob/master/C%2B%2B/img/%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%26%E8%AE%BF%E9%97%AE%E9%99%90%E5%AE%9A%E7%AC%A6.png"/></div>
